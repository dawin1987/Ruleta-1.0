<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruleta Din√°mica Dawin</title>
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  
 <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }


header {
    text-align: center;
    margin-bottom: 30px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}


.subtitle {
    font-size: 1.2rem;
    opacity: 0.8;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .game-controls {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .game-id {
            font-size: 0.9rem;
            color: #666;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .input-group {
          
            gap: 10px;
            margin-bottom: 15px;
        }

        input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }





        .wheel-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 20px auto;
            max-width: 100%;
        }

        #wheelCanvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }

      

.arrow {
        border-bottom: blue;
    /* object-fit: initial; */
    transform: rotate(4deg);
    position: absolute;
    top: 177px;
    left: 68%;
    transform: translateX(400%) rotate(90deg);
    width: 0;
    height: 0;
    border-left: 15px solid #e90b0b00;
    border-right: 15px solid #e7171700;
    border-top: 40px solid #f45c43;
    border-bottom: px solid #e90b0b00;
    filter: drop-shadow(0 1px 5px rgba(0, 0, 0, 0.3));
    z-index: 10;
}


        .participants-section {
            background: linear-gradient(135deg, #11998ecc 0%, #38ef7d 100%);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .participants-list {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .participant-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .participant-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .participant-name {
            font-weight: bold;
            color: #333;
        }

        .btn-small {
            padding: 5px 10px;
            font-size: 0.85rem;
        }

        .qr-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        #qrcode {
            display: inline-block;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }

        .qr-link {
            word-break: break-all;
            color: #667eea;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        .winners-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .winner-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 8px;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            animation: popIn 0.5s;
            position: relative;
        }

        @keyframes popIn {
            from {
                transform: scale(0.5);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .winner-announcement {
            font-size: 3rem;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
        }




/* Toast Notifications */
        #toast-container {
            position: fixed; 
top: 50%;
    left: 50%;
z-index: 9999;
    display: flex; flex-direction: column; gap: 10px;
   
        }
        .toast {
            background: #2d3748; color: white;  padding: 20px 30px;
            border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-size: 18px; opacity: 0; transform: translate(-50%, -50%);
            transition: 0.3s;
        }
        .toast.show { opacity: 1;transform: translate(-50%, -50%); }
        .toast-success { background: #48bb78; }
        .toast-error { background: #f56565; }



.confetti {
    position: fixed; /* siempre encima del contenido */
    top: 0;
    width: 10px;
    height: 10px;
    background: #f0f;
    animation: confetti-fall 3s linear;
    z-index: 9999; /* aseg√∫rate de que quede por encima de todo */
    pointer-events: none; /* evita que interfiera con clics o modales */
}

@keyframes confetti-fall {
    0% {
        transform: translateY(0) rotate(0deg);
    }
    100% {
        transform: translateY(100vh) rotate(720deg);
    }
}


       

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .status-open {
            background: #38ef7d;
            color: white;
        }

        .status-closed {
            background: #eb3349;
            color: white;
        }

        h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #ffffff;
            font-style: italic;
        }

@media (max-width: 430px) {
    .wheel-container {
        width: 300px;
        height: 300px;
        margin: 20px auto;   
                     }
    .arrow {
    border-bottom: blue;
    /* object-fit: initial; */
    transform: rotate(4deg);
    position: absolute;
    top: 130px;
    left: 57%;
    transform: translateX(400%) rotate(90deg);
    width: 0;
    height: 0;
    border-left: 15px solid #e90b0b00;
    border-right: 15px solid #e7171700;
    border-top: 40px solid #f45c43;
    border-bottom: px solid #e90b0b00;
    filter: drop-shadow(0 1px 5px rgba(0, 0, 0, 0.3));
    z-index: 10;
        }
     h1 {
            text-align: center;
            color: white;
            font-size: 1.7rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

    .subtitle {
    font-size: 1.1rem;
    opacity: 0.8;
             }

    .nombreparticipante
          {
    flex: 1;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    transition: border 0.3s;
    max-width: 100%;
    width: 320px;
          }
    .numero {
    flex: 1;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    transition: border 0.3s;
    max-width: 100%;
    width: 320px;
}

.btn-success {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: #f7f7f7;
    max-width: 100%;
    width: 320px;
}
    
}

    </style>
</head>
<body>



    <div class="container">



       <header>
            <h1>üé° Juega la Ruleta Din√°mica D&R</h1>
            <p class="subtitle">Gira la ruleta y descubre al ganador - Comparte el c√≥digo QR para participaci√≥n remota</p>
        </header>



 <div id="toast-container"></div>



        <div class="game-controls">
            <div class="game-info">
                <div>
                    <span class="game-id">ID del Juego: <strong id="gameIdDisplay">-</strong></span>
                    <span class="status-badge status-open" id="gameStatus">Apartura un nuevo juego y empieza la diversi√≥n </span>
                </div>
                <div style="display: flex;gap: 10px;/* flex-wrap: wrap; */">
                    
                    <button class="btn btn-primary" id="newGameBtn">üéÆ Nuevo Juego</button>
                    <button class="btn btn-danger" id="closeGameBtn" disabled>üîí Cerrar Juego</button>
                </div>
            </div>

            <div class="input-group">
                <input type="text" class="nombreparticipante" id="nameInput" placeholder="Nombre del participante" />
                <input type="text" class="numero" id="numberInput" placeholder="N√∫mero" />
                <button class="btn btn-success" id="addParticipantBtn">‚ûï Agregar</button>
            </div>
        </div>

        <div class="main-content">
            <div class="wheel-section">
<div style="margin-top: 15px;">
    <label style="font-weight: bold;">‚è≥ Duraci√≥n del giro (seg.)</label>
    <input 
        type="number" 
        id="spinSeconds" 
        min="1" 
        value="5" 
        style="width: 50px; padding: 2px; margin-left: 10px;"
    >
</div>

                <h2>Ruleta</h2>
                <div class="wheel-container">
                    <div class="arrow"></div>
                    <canvas id="wheelCanvas" width="400" height="400"></canvas>
                </div>
                <button class="btn btn-warning" id="spinBtn" disabled style="font-size: 1.2rem; padding: 15px 30px;">
                    üéØ GIRAR RULETA
                </button>
            </div>

            <div class="participants-section">
                <h2>Participantes (<span id="participantCount">0</span>)</h2>
                <div class="participants-list" id="participantsList"></div>
            </div>
        </div>

        <div class="qr-section">
            <h2>üì± C√≥digo QR para Participaci√≥n Remota</h2>
            <div id="qrcode"></div>
            <div class="qr-link" id="qrLink">Genera un nuevo juego para obtener el enlace</div>
        </div>

        <div class="winners-section">
            <h2>üèÜ Ganadores (<span id="winnerCount">0</span>)</h2>
            <div id="winnersList"></div>
        </div>
    </div>

    <div class="modal" id="winnerModal">
        <div class="modal-content">
            <h2>üéâ ¬°TENEMOS UN GANADOR! üéâ</h2>
            <div class="winner-announcement" id="winnerName"></div>
            <button class="btn btn-danger btn-small" id="removeWinnerBtn" style="margin-right: 10px; margin-bottom: 10px;">üóëÔ∏è Eliminar del Juego</button>
            <button class="btn btn-primary" id="closeModalBtn">Cerrar</button>
        </div>
    </div>

<div>
  
  <div id="messageBox" style="margin-top:8px; font-size:0.9rem;"></div>
</div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <script type="module">
      
const _0x7412b7=_0xc5e2;(function(_0x2eac2e,_0x5c2f92){const _0x4bd8b2=_0xc5e2,_0x17831e=_0x2eac2e();while(!![]){try{const _0x252705=parseInt(_0x4bd8b2(0xb3))/0x1+parseInt(_0x4bd8b2(0x159))/0x2+-parseInt(_0x4bd8b2(0x11b))/0x3*(parseInt(_0x4bd8b2(0x130))/0x4)+-parseInt(_0x4bd8b2(0x12f))/0x5*(-parseInt(_0x4bd8b2(0x142))/0x6)+-parseInt(_0x4bd8b2(0x137))/0x7+parseInt(_0x4bd8b2(0x145))/0x8*(-parseInt(_0x4bd8b2(0x111))/0x9)+parseInt(_0x4bd8b2(0xf4))/0xa;if(_0x252705===_0x5c2f92)break;else _0x17831e['push'](_0x17831e['shift']());}catch(_0x48604b){_0x17831e['push'](_0x17831e['shift']());}}}(_0x263f,0x529ca));import{initializeApp}from'https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js';import{getFirestore,collection,doc,setDoc,onSnapshot,deleteDoc,addDoc,getDoc,query,getDocs}from'https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js';function _0x263f(){const _0x2dd9a9=['animationDelay','#e0e0e0','data','font','classList','qrcode','spinSeconds','map','getItem','toast\x20toast-','replace','#999','newGameBtn','bold\x2014px\x20Arial',')</span>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-small\x22\x20onclick=\x22window.removeParticipant(\x27','closeGameBtn','joinNumber','<div\x20class=\x22empty-state\x22>A√∫n\x20no\x20hay\x20ganadores</div>','toLocaleString','getElementById','joinName','lineWidth','length','lastAddedParticipant','some','winners','<a\x20href=\x22','origin','toLowerCase','addParticipantBtn','catch','stroke','7680680IJQPwh','ruleta-2dc56.firebasestorage.app','rotate','‚ö†Ô∏è\x20Cierra\x20el\x20juego\x20antes\x20de\x20girar','‚ùå\x20Este\x20juego\x20no\x20existe','&lt;','596938524799','name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22padding:6px\x204px;\x20border-bottom:1px\x20solid\x20#f0f0f0;\x20color:','value','joinWinnerCount','gameIdDisplay','fillText','winnerCount','#FF6B6B','participants','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','addEventListener','red','‚úÖ\x20¬°Te\x20has\x20unido\x20exitosamente!','closePath','spinBtn','open','joinBtn','AudioContext','</div>','error','forEach','2477331VSSgJE','#000','#98D8C8','removeItem','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22input-group\x22\x20style=\x22flex-direction:\x20column;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22joinName\x22\x20placeholder=\x22Tu\x20nombre\x22\x20style=\x22margin-bottom:\x2010px;\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22joinNumber\x22\x20placeholder=\x22Tu\x20n√∫mero\x20(opcional)\x22\x20style=\x22margin-bottom:\x2010px;\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-success\x22\x20id=\x22joinBtn\x22\x20style=\x22width:\x20100%;\x22>‚úÖ\x20Unirme\x20al\x20Juego</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22joinMessage\x22\x20style=\x22margin-top:\x2020px;\x20text-align:\x20center;\x20font-weight:\x20bold;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a<div\x20class=\x22lists-section\x22\x20style=\x22margin-top:30px;\x22>\x0a\x20\x20\x20\x20<div\x20class=\x22participants-section\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>üë•\x20Participantes\x20(<span\x20id=\x22joinParticipantCount\x22>0</span>)</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22joinParticipantsList\x22\x20style=\x22max-height:200px;\x20overflow-y:auto;\x20border:1px\x20solid\x20#ddd;\x20padding:10px;\x20border-radius:8px;\x22></div>\x0a\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20<div\x20class=\x22winners-section\x22\x20style=\x22margin-top:20px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h3>üèÜ\x20Ganadores\x20(<span\x20id=\x22joinWinnerCount\x22>0</span>)</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22joinWinnersList\x22\x20style=\x22max-height:150px;\x20overflow-y:auto;\x20border:1px\x20solid\x20#ddd;\x20padding:10px;\x20border-radius:8px;\x22></div>\x0a\x20\x20\x20\x20</div>\x0a</div>\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','join','status','\x27)\x22>Eliminar</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','success','#45B7D1','15rSINlt','wheelCanvas','width','key','left','#FFA07A','toLocaleTimeString','removeWinnerBtn','joinMessage','<div\x20style=\x22color:gray;\x20text-align:center;\x20padding:8px;\x22>A√∫n\x20no\x20hay\x20ganadores.</div>','ABIERTO','‚ùå\x20Este\x20juego\x20est√°\x20cerrado','floor','body','backgroundColor','docs','#fff','number','qrLink','disabled','616805bsLFvp','366468nbXHNa','exists','moveTo','textContent','data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE=','AIzaSyAxiTkjfh_80fTdXwzLGOl2YMlHsCOsyRM','addedAt','3534776OKoYEr','Enter','joinParticipantCount','clearRect','numberInput','¬øCrear\x20nuevo\x20juego?\x20El\x20actual\x20se\x20perder√°\x20de\x20la\x20vista.','‚úÖ\x20Nuevo\x20juego\x20creado\x20exitosamente','G-Y5DCQVLFML','fill','keypress','closeModalBtn','6moteDZ','&#039;','Este\x20juego\x20est√°\x20cerrado','8gEPEaQ','add','center','search','¬øCerrar\x20este\x20juego?\x20No\x20se\x20podr√°n\x20agregar\x20m√°s\x20participantes.','log','innerHTML','<div\x20style=\x22color:gray;\x20text-align:center;\x20padding:8px;\x22>No\x20hay\x20participantes\x20a√∫n.</div>','style','nameInput','active','save','webkitAudioContext','createElement','winnersList','#F7DC6F','\x20<span\x20style=\x22color:#666;\x20font-size:0.9rem;\x22>(','textAlign','joinParticipantsList','location','970402BlapWs','fillStyle','</span>','appendChild','Por\x20favor\x20ingresa\x20un\x20nombre','getContext','currentGameId',';\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','get','pathname','&quot;','closed','strokeStyle','color','restore','gameStatus','winnerName','participantCount','‚ùå\x20Por\x20favor\x20ingresa\x20tu\x20nombre','winnerModal','200060CPYciL','\x22\x20target=\x22_blank\x22>Copiar\x20enlace\x20de\x20invitaci√≥n</a>','ruleta-2dc56','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22\x20style=\x22max-width:\x20500px;\x20margin-top:\x2050px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22game-controls\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20style=\x22text-align:\x20center;\x20color:\x20#667eea;\x22>\x20üé°\x20√önete\x20al\x20Juego\x20D&R\x20üéØ\x20</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x20margin-bottom:\x2020px;\x22>ID:\x20<strong>','height','sort','arc','¬øEliminar\x20este\x20participante?','CERRADO','black','pow','20px\x20Arial','play','click','setItem','beginPath','#333','ruleta-2dc56.firebaseapp.com','&gt;','translate','className','div','random','now','wonAt','remove','show','trim','status-badge\x20status-open','participantsList','games','joinWinnersList'];_0x263f=function(){return _0x2dd9a9;};return _0x263f();}const firebaseConfig={'apiKey':_0x7412b7(0x135),'authDomain':_0x7412b7(0xc4),'projectId':_0x7412b7(0xb5),'storageBucket':_0x7412b7(0xf5),'messagingSenderId':_0x7412b7(0xfa),'appId':'1:596938524799:web:8d3fbd8fc5c3da5828174a','measurementId':_0x7412b7(0x13e)},app=initializeApp(firebaseConfig),db=getFirestore(app);let currentGameId=null,participants=[],winners=[],isSpinning=![],gameStatus=_0x7412b7(0x10b),currentWinner=null;const audioCtx=new(window[(_0x7412b7(0x10d))]||window[(_0x7412b7(0x151))])(),savedGameId=localStorage[_0x7412b7(0xdb)](_0x7412b7(0x15f));if(savedGameId){currentGameId=savedGameId,console[_0x7412b7(0x14a)]('‚ôªÔ∏è\x20Juego\x20restaurado\x20autom√°ticamente:',currentGameId),listenToParticipants(),listenToWinners(),document[_0x7412b7(0xe7)](_0x7412b7(0xff))['textContent']=currentGameId,document[_0x7412b7(0xe7)]('gameStatus')[_0x7412b7(0x133)]=_0x7412b7(0x125),document['getElementById']('gameStatus')['className']='status-badge\x20status-open';const closeBtn=document[_0x7412b7(0xe7)](_0x7412b7(0xe3));if(closeBtn)closeBtn['disabled']=![];generateQR();}const colors=[_0x7412b7(0x102),'#4ECDC4',_0x7412b7(0x11a),_0x7412b7(0x120),_0x7412b7(0x113),_0x7412b7(0x154),'#BB8FCE','#85C1E2','#F8B739','#52B788'],canvas=document[_0x7412b7(0xe7)](_0x7412b7(0x11c)),ctx=canvas[_0x7412b7(0x15e)]('2d');function generateGameId(){return'GAME_'+Date['now']();}async function initNewGame(){const _0xb74294=_0x7412b7;if(currentGameId&&!confirm(_0xb74294(0x13c)))return;currentGameId=generateGameId(),localStorage['setItem'](_0xb74294(0x15f),currentGameId),participants=[],winners=[],gameStatus=_0xb74294(0x10b),document[_0xb74294(0xe7)](_0xb74294(0xff))[_0xb74294(0x133)]=currentGameId,document[_0xb74294(0xe7)](_0xb74294(0xae))[_0xb74294(0x133)]=_0xb74294(0x125),document['getElementById'](_0xb74294(0xae))['className']=_0xb74294(0xcf),document[_0xb74294(0xe7)](_0xb74294(0xe3))[_0xb74294(0x12e)]=![],await setDoc(doc(db,_0xb74294(0xd1),currentGameId),{'status':_0xb74294(0x10b),'createdAt':Date[_0xb74294(0xca)]()}),generateQR(),updateParticipantsList(),updateWinnersList(),drawWheel(),listenToParticipants(),listenToWinners(),showToast(_0xb74294(0x13d));}function generateQR(){const _0x1ecf69=_0x7412b7,_0x3d1858=document['getElementById'](_0x1ecf69(0xd8));_0x3d1858['innerHTML']='';const _0x20042b=''+window[_0x1ecf69(0x158)][_0x1ecf69(0xef)]+window[_0x1ecf69(0x158)][_0x1ecf69(0x162)]+'?join='+currentGameId;new QRCode(_0x3d1858,{'text':_0x20042b,'width':0x96,'height':0x96}),document['getElementById'](_0x1ecf69(0x12d))[_0x1ecf69(0x14b)]=_0x1ecf69(0xee)+_0x20042b+_0x1ecf69(0xb4);}function listenToParticipants(){const _0x56ff1a=_0x7412b7,_0x3b4619=collection(db,_0x56ff1a(0xd1),currentGameId,_0x56ff1a(0x103));onSnapshot(_0x3b4619,_0x60142=>{const _0x19e67e=_0x56ff1a;participants=[],_0x60142['forEach'](_0x4c0cba=>{const _0x2497aa=_0xc5e2;participants[_0x2497aa(0x104)]({'id':_0x4c0cba['id'],..._0x4c0cba[_0x2497aa(0xd5)]()});});if(participants['length']>0x0){const _0x4d7b62=[...participants][_0x19e67e(0xb8)]((_0x4a6997,_0x1dd4ef)=>(_0x1dd4ef[_0x19e67e(0x136)]||0x0)-(_0x4a6997[_0x19e67e(0x136)]||0x0));localStorage[_0x19e67e(0xc1)](_0x19e67e(0xeb),_0x4d7b62[0x0]['id']);}updateParticipantsList(),drawWheel();});}function listenToWinners(){const _0x55a1e6=_0x7412b7,_0x8dc560=collection(db,_0x55a1e6(0xd1),currentGameId,_0x55a1e6(0xed));onSnapshot(_0x8dc560,_0x48103d=>{const _0x872201=_0x55a1e6;winners=[],_0x48103d[_0x872201(0x110)](_0x471fcb=>{const _0x58c830=_0x872201;winners[_0x58c830(0x104)]({'id':_0x471fcb['id'],..._0x471fcb[_0x58c830(0xd5)]()});}),updateWinnersList();});}async function addParticipant(){const _0x3688af=_0x7412b7,_0x27cc21=document[_0x3688af(0xe7)](_0x3688af(0x14e))[_0x3688af(0xfd)]['trim'](),_0x41c8c0=document[_0x3688af(0xe7)](_0x3688af(0x13b))['value']['trim']();if(!_0x27cc21){showToast(_0x3688af(0x15d));return;}if(!currentGameId){showToast('Primero\x20crea\x20un\x20nuevo\x20juego');return;}const _0x442bc3=doc(db,_0x3688af(0xd1),currentGameId),_0x350af9=await getDoc(_0x442bc3);if(_0x350af9[_0x3688af(0x131)]()&&_0x350af9[_0x3688af(0xd5)]()['status']===_0x3688af(0x164)){showToast(_0x3688af(0x144));return;}const _0x42b241=collection(db,_0x3688af(0xd1),currentGameId,'participants'),_0x164bec=await getDocs(_0x42b241),_0x42eb7d=_0x164bec[_0x3688af(0x12a)]['some'](_0x23d02d=>{const _0x483109=_0x3688af,_0x2c6261=_0x23d02d[_0x483109(0xd5)]();return _0x2c6261[_0x483109(0xfb)][_0x483109(0xf0)]()===_0x27cc21['toLowerCase']()&&_0x2c6261['number']['trim']()===_0x41c8c0[_0x483109(0xce)]();});if(_0x42eb7d){showToast('‚ö†Ô∏è\x20Este\x20participante\x20ya\x20existe',_0x3688af(0x10f));return;}const _0x207aac=await addDoc(_0x42b241,{'name':_0x27cc21,'number':_0x41c8c0,'addedAt':Date[_0x3688af(0xca)]()});localStorage['setItem']('lastAddedParticipant',_0x207aac['id']),document[_0x3688af(0xe7)](_0x3688af(0x14e))['value']='',document['getElementById'](_0x3688af(0x13b))[_0x3688af(0xfd)]='';}async function removeParticipant(_0x1374cd){const _0xc07df0=_0x7412b7;confirm(_0xc07df0(0xba))&&await deleteDoc(doc(db,_0xc07df0(0xd1),currentGameId,_0xc07df0(0x103),_0x1374cd));}function updateParticipantsList(){const _0x3c9ecf=_0x7412b7,_0x5f21c6=document[_0x3c9ecf(0xe7)](_0x3c9ecf(0xd0));document[_0x3c9ecf(0xe7)](_0x3c9ecf(0xb0))[_0x3c9ecf(0x133)]=participants['length'],document[_0x3c9ecf(0xe7)](_0x3c9ecf(0x10a))[_0x3c9ecf(0x12e)]=participants[_0x3c9ecf(0xea)]<0x2||isSpinning;if(participants[_0x3c9ecf(0xea)]===0x0){_0x5f21c6['innerHTML']='<div\x20class=\x22empty-state\x22>No\x20hay\x20participantes\x20a√∫n,agrega\x20algunos\x20nombres\x20para\x20empezar\x20tu\x20sorteo</div>';return;}participants['sort']((_0xafca9,_0x3a87a1)=>(_0x3a87a1[_0x3c9ecf(0x136)]||0x0)-(_0xafca9['addedAt']||0x0));const _0x20dffb=localStorage[_0x3c9ecf(0xdb)]('lastAddedParticipant');_0x5f21c6['innerHTML']=participants['map'](_0x4b8d83=>{const _0x174c17=_0x3c9ecf,_0x2b79f9=_0x4b8d83['id']===_0x20dffb;return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22participant-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22participant-name\x22\x20style=\x22color:'+(_0x2b79f9?_0x174c17(0x107):_0x174c17(0xbc))+_0x174c17(0x160)+_0x4b8d83[_0x174c17(0xfb)]+'\x20'+(_0x4b8d83['number']?'('+_0x4b8d83[_0x174c17(0x12c)]+')':'')+_0x174c17(0xe2)+_0x4b8d83['id']+_0x174c17(0x118);})[_0x3c9ecf(0x116)]('');}function updateWinnersList(){const _0xc1fb20=_0x7412b7,_0x20297a=document[_0xc1fb20(0xe7)](_0xc1fb20(0x153));document[_0xc1fb20(0xe7)](_0xc1fb20(0x101))['textContent']=winners[_0xc1fb20(0xea)];if(winners[_0xc1fb20(0xea)]===0x0){_0x20297a['innerHTML']=_0xc1fb20(0xe5);return;}winners['sort']((_0x5e71a1,_0x551a0)=>(_0x5e71a1[_0xc1fb20(0xcb)]||0x0)-(_0x551a0['wonAt']||0x0)),_0x20297a[_0xc1fb20(0x14b)]=winners[_0xc1fb20(0xda)](_0x130790=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22winner-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>üèÜ\x20'+_0x130790['name']+'\x20'+(_0x130790['number']?'('+_0x130790['number']+')':'')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.85rem;\x20color:\x20#666;\x22>'+new Date(_0x130790[_0xc1fb20(0xcb)])[_0xc1fb20(0x121)]()+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')[_0xc1fb20(0x116)]('');}function _0xc5e2(_0x1a6a7f,_0x66c52e){const _0x263fae=_0x263f();return _0xc5e2=function(_0xc5e2f5,_0x17609d){_0xc5e2f5=_0xc5e2f5-0xad;let _0x5dd380=_0x263fae[_0xc5e2f5];return _0x5dd380;},_0xc5e2(_0x1a6a7f,_0x66c52e);}function drawWheel(){const _0x334fb2=_0x7412b7;if(participants[_0x334fb2(0xea)]===0x0){ctx['clearRect'](0x0,0x0,canvas[_0x334fb2(0x11d)],canvas[_0x334fb2(0xb7)]),ctx[_0x334fb2(0x15a)]=_0x334fb2(0xd4),ctx[_0x334fb2(0xc2)](),ctx['arc'](0xc8,0xc8,0xb4,0x0,0x2*Math['PI']),ctx[_0x334fb2(0x13f)](),ctx[_0x334fb2(0x15a)]=_0x334fb2(0xde),ctx[_0x334fb2(0xd6)]=_0x334fb2(0xbe),ctx[_0x334fb2(0x156)]=_0x334fb2(0x147),ctx[_0x334fb2(0x100)]('Agrega\x20participantes',0xc8,0xc8);return;}const _0x541f87=0xc8,_0x30daa6=0xc8,_0x31d349=0xb4,_0x1fcc81=0x2*Math['PI']/participants[_0x334fb2(0xea)];ctx[_0x334fb2(0x13a)](0x0,0x0,canvas[_0x334fb2(0x11d)],canvas[_0x334fb2(0xb7)]),participants[_0x334fb2(0x110)]((_0x7ec5ef,_0x25da5b)=>{const _0x221a13=_0x334fb2,_0x25850a=_0x25da5b*_0x1fcc81,_0x49163f=_0x25850a+_0x1fcc81;ctx['fillStyle']=colors[_0x25da5b%colors[_0x221a13(0xea)]],ctx[_0x221a13(0xc2)](),ctx[_0x221a13(0x132)](_0x541f87,_0x30daa6),ctx[_0x221a13(0xb9)](_0x541f87,_0x30daa6,_0x31d349,_0x25850a,_0x49163f),ctx[_0x221a13(0x109)](),ctx['fill'](),ctx[_0x221a13(0x165)]=_0x221a13(0x12b),ctx[_0x221a13(0xe9)]=0x3,ctx[_0x221a13(0xf3)](),ctx['save'](),ctx[_0x221a13(0xc6)](_0x541f87,_0x30daa6),ctx[_0x221a13(0xf6)](_0x25850a+_0x1fcc81/0x2),ctx['textAlign']=_0x221a13(0x147),ctx[_0x221a13(0x15a)]=_0x221a13(0x112),ctx[_0x221a13(0xd6)]=_0x221a13(0xe0),ctx['fillText'](_0x7ec5ef['name'],_0x31d349/1.5,0x5),ctx[_0x221a13(0xad)]();}),ctx[_0x334fb2(0x15a)]=_0x334fb2(0xc3),ctx[_0x334fb2(0xc2)](),ctx['arc'](_0x541f87,_0x30daa6,0x14,0x0,0x2*Math['PI']),ctx[_0x334fb2(0x13f)]();}function spinWheel(){const _0x39d631=_0x7412b7;if(gameStatus===_0x39d631(0x10b)){showToast(_0x39d631(0xf7),_0x39d631(0x10f));return;}if(isSpinning||participants[_0x39d631(0xea)]<0x2)return;isSpinning=!![],document['getElementById'](_0x39d631(0x10a))[_0x39d631(0x12e)]=!![];const _0x267168=new Audio(_0x39d631(0x134));_0x267168[_0x39d631(0xbf)]()[_0x39d631(0xf2)](()=>{});const _0x3ed541=0x168*0xc+Math[_0x39d631(0xc9)]()*0x168;let _0x22d795=Number(document[_0x39d631(0xe7)](_0x39d631(0xd9))?.[_0x39d631(0xfd)]);(!_0x22d795||_0x22d795<0x1)&&(_0x22d795=0x5);const _0x48f91a=_0x22d795*0x3e8,_0x2d6f7b=Date['now'](),_0x7144dc=0x168/participants['length'];let _0x84a1c9=0x0;function _0x1e126a(){const _0x3af4ea=_0x39d631,_0x4b5e23=Date[_0x3af4ea(0xca)]()-_0x2d6f7b,_0x2a5dd8=Math['min'](_0x4b5e23/_0x48f91a,0x1),_0xd8cc90=0x1-Math[_0x3af4ea(0xbd)](0x1-_0x2a5dd8,0x3);_0x84a1c9=_0x3ed541*_0xd8cc90,ctx[_0x3af4ea(0x150)](),ctx[_0x3af4ea(0x13a)](0x0,0x0,canvas['width'],canvas[_0x3af4ea(0xb7)]),ctx[_0x3af4ea(0xc6)](0xc8,0xc8),ctx[_0x3af4ea(0xf6)](_0x84a1c9*Math['PI']/0xb4),ctx[_0x3af4ea(0xc6)](-0xc8,-0xc8),drawWheel(),ctx['restore'](),_0x2a5dd8<0x1?requestAnimationFrame(_0x1e126a):announceWinner(_0x84a1c9);}_0x1e126a();}async function announceWinner(_0x421b36){const _0x3b58f4=_0x7412b7,_0x80922b=_0x421b36%0x168,_0x5eb6b7=0x168/participants[_0x3b58f4(0xea)],_0x2ad27e=Math['floor']((0x168-_0x80922b)/_0x5eb6b7)%participants[_0x3b58f4(0xea)];currentWinner=participants[_0x2ad27e],document[_0x3b58f4(0xe7)](_0x3b58f4(0xaf))[_0x3b58f4(0x133)]=currentWinner['name'],document[_0x3b58f4(0xe7)](_0x3b58f4(0xb2))['classList'][_0x3b58f4(0x146)](_0x3b58f4(0x14f)),createConfetti();const _0x35eb92=new Audio(_0x3b58f4(0x134));_0x35eb92['play']()['catch'](()=>{});const _0x1fef3b=collection(db,_0x3b58f4(0xd1),currentGameId,'winners');await addDoc(_0x1fef3b,{'name':currentWinner[_0x3b58f4(0xfb)],'number':currentWinner['number']||'','wonAt':Date[_0x3b58f4(0xca)]()}),isSpinning=![],document[_0x3b58f4(0xe7)](_0x3b58f4(0x10a))[_0x3b58f4(0x12e)]=![];}let lastTick=-0x1;function createConfetti(){for(let _0x1b2c40=0x0;_0x1b2c40<0x64;_0x1b2c40++){setTimeout(()=>{const _0x5757f8=_0xc5e2,_0x3d82a3=document[_0x5757f8(0x152)]('div');_0x3d82a3[_0x5757f8(0xc7)]='confetti',_0x3d82a3[_0x5757f8(0x14d)][_0x5757f8(0x11f)]=Math[_0x5757f8(0xc9)]()*window['innerWidth']+'px',_0x3d82a3[_0x5757f8(0x14d)][_0x5757f8(0x129)]=colors[Math[_0x5757f8(0x127)](Math['random']()*colors['length'])],_0x3d82a3[_0x5757f8(0x14d)][_0x5757f8(0xd3)]=Math[_0x5757f8(0xc9)]()*0.5+'s',document[_0x5757f8(0x128)][_0x5757f8(0x15c)](_0x3d82a3),setTimeout(()=>_0x3d82a3['remove'](),0xbb8);},_0x1b2c40*0x1e);}}async function closeGame(){const _0x1dfc0d=_0x7412b7;confirm(_0x1dfc0d(0x149))&&(await setDoc(doc(db,_0x1dfc0d(0xd1),currentGameId),{'status':_0x1dfc0d(0x164),'closedAt':Date[_0x1dfc0d(0xca)]()},{'merge':!![]}),gameStatus='closed',document[_0x1dfc0d(0xe7)](_0x1dfc0d(0xae))[_0x1dfc0d(0x133)]=_0x1dfc0d(0xbb),document[_0x1dfc0d(0xe7)](_0x1dfc0d(0xae))[_0x1dfc0d(0xc7)]='status-badge\x20status-closed',document['getElementById'](_0x1dfc0d(0xe3))[_0x1dfc0d(0x12e)]=!![],localStorage[_0x1dfc0d(0x114)](_0x1dfc0d(0x15f)),alert('Juego\x20cerrado.\x20Ya\x20no\x20se\x20aceptan\x20m√°s\x20participantes.'));}async function removeWinnerFromGame(){const _0x2ca864=_0x7412b7;currentWinner&&(await deleteDoc(doc(db,'games',currentGameId,'participants',currentWinner['id'])),document[_0x2ca864(0xe7)](_0x2ca864(0xb2))[_0x2ca864(0xd7)][_0x2ca864(0xcc)](_0x2ca864(0x14f)),currentWinner=null);}document[_0x7412b7(0xe7)](_0x7412b7(0xdf))[_0x7412b7(0x106)](_0x7412b7(0xc0),initNewGame),document[_0x7412b7(0xe7)](_0x7412b7(0xf1))[_0x7412b7(0x106)](_0x7412b7(0xc0),addParticipant),document[_0x7412b7(0xe7)](_0x7412b7(0x10a))[_0x7412b7(0x106)]('click',spinWheel),document['getElementById'](_0x7412b7(0xe3))[_0x7412b7(0x106)](_0x7412b7(0xc0),closeGame),document[_0x7412b7(0xe7)](_0x7412b7(0x141))[_0x7412b7(0x106)](_0x7412b7(0xc0),()=>{const _0x4aeb97=_0x7412b7;document[_0x4aeb97(0xe7)](_0x4aeb97(0xb2))[_0x4aeb97(0xd7)]['remove']('active');}),document[_0x7412b7(0xe7)](_0x7412b7(0x122))[_0x7412b7(0x106)]('click',removeWinnerFromGame),document[_0x7412b7(0xe7)]('nameInput')[_0x7412b7(0x106)](_0x7412b7(0x140),_0x2c017b=>{const _0xcd75b4=_0x7412b7;if(_0x2c017b[_0xcd75b4(0x11e)]===_0xcd75b4(0x138))addParticipant();}),window['removeParticipant']=removeParticipant;const urlParams=new URLSearchParams(window['location'][_0x7412b7(0x148)]),joinGameId=urlParams[_0x7412b7(0x161)]('join');if(joinGameId){document[_0x7412b7(0x128)][_0x7412b7(0x14b)]=_0x7412b7(0xb6)+joinGameId+_0x7412b7(0x115),document[_0x7412b7(0xe7)](_0x7412b7(0x10c))['addEventListener']('click',async()=>{const _0x367c40=_0x7412b7,_0x49e3f6=document[_0x367c40(0xe7)](_0x367c40(0xe8))[_0x367c40(0xfd)][_0x367c40(0xce)](),_0x4c9e76=document[_0x367c40(0xe7)](_0x367c40(0xe4))[_0x367c40(0xfd)][_0x367c40(0xce)](),_0x16c047=document['getElementById'](_0x367c40(0x123));_0x16c047[_0x367c40(0x133)]='';if(!_0x49e3f6){_0x16c047[_0x367c40(0x14d)][_0x367c40(0x166)]=_0x367c40(0x107),_0x16c047['textContent']=_0x367c40(0xb1);return;}const _0x5dd856=doc(db,'games',joinGameId),_0x10852b=await getDoc(_0x5dd856);if(!_0x10852b[_0x367c40(0x131)]()){_0x16c047[_0x367c40(0x14d)][_0x367c40(0x166)]='red',_0x16c047[_0x367c40(0x133)]=_0x367c40(0xf8);return;}if(_0x10852b[_0x367c40(0xd5)]()[_0x367c40(0x117)]==='closed'){_0x16c047[_0x367c40(0x14d)][_0x367c40(0x166)]='red',_0x16c047[_0x367c40(0x133)]=_0x367c40(0x126);return;}const _0x52a710=collection(db,_0x367c40(0xd1),joinGameId,_0x367c40(0x103)),_0x177ca9=await getDocs(_0x52a710),_0x35a21c=_0x177ca9['docs'][_0x367c40(0xec)](_0x144591=>{const _0xf59e7a=_0x367c40,_0x48f6e8=_0x144591['data']();return _0x48f6e8[_0xf59e7a(0xfb)]['toLowerCase']()===_0x49e3f6['toLowerCase']()&&_0x48f6e8[_0xf59e7a(0x12c)]['trim']()===_0x4c9e76[_0xf59e7a(0xce)]();});if(_0x35a21c){_0x16c047[_0x367c40(0x14d)][_0x367c40(0x166)]='red',_0x16c047[_0x367c40(0x133)]='‚ö†Ô∏è\x20Este\x20nombre\x20y\x20n√∫mero\x20ya\x20est√°n\x20registrados.';return;}await addDoc(_0x52a710,{'name':_0x49e3f6,'number':_0x4c9e76,'addedAt':Date['now']()}),_0x16c047[_0x367c40(0x14d)][_0x367c40(0x166)]='green',_0x16c047[_0x367c40(0x133)]=_0x367c40(0x108),document[_0x367c40(0xe7)](_0x367c40(0xe8))[_0x367c40(0xfd)]='',document['getElementById'](_0x367c40(0xe4))[_0x367c40(0xfd)]='';});const joinParticipantsRef=collection(db,'games',joinGameId,_0x7412b7(0x103)),joinWinnersRef=collection(db,_0x7412b7(0xd1),joinGameId,_0x7412b7(0xed));onSnapshot(joinParticipantsRef,_0x988f61=>{const _0x3490a7=_0x7412b7,_0xf94f7f=document['getElementById'](_0x3490a7(0x157)),_0x2e3049=document[_0x3490a7(0xe7)](_0x3490a7(0x139)),_0x227a27=[];_0x988f61[_0x3490a7(0x110)](_0x1f1299=>{const _0x26321c=_0x3490a7,_0x3420e4=_0x1f1299[_0x26321c(0xd5)]();_0x227a27['push']({'id':_0x1f1299['id'],'name':_0x3420e4[_0x26321c(0xfb)]||'','number':_0x3420e4[_0x26321c(0x12c)]||'','addedAt':_0x3420e4[_0x26321c(0x136)]||0x0});}),_0x227a27[_0x3490a7(0xb8)]((_0x48514e,_0x8b32ef)=>(_0x8b32ef[_0x3490a7(0x136)]||0x0)-(_0x48514e[_0x3490a7(0x136)]||0x0)),_0x2e3049['textContent']=_0x227a27[_0x3490a7(0xea)];if(_0x227a27['length']===0x0){_0xf94f7f['innerHTML']=_0x3490a7(0x14c);return;}let _0x268f00=_0x227a27[0x0]['id'];_0xf94f7f[_0x3490a7(0x14b)]=_0x227a27[_0x3490a7(0xda)](_0x325b98=>{const _0x2c861d=_0x3490a7,_0x539496=_0x325b98['id']===_0x268f00,_0x131e50=_0x539496?_0x2c861d(0x107):_0x2c861d(0xbc),_0x4f3f4e=_0x325b98[_0x2c861d(0x12c)]?_0x2c861d(0x155)+_0x325b98['number']+_0x2c861d(0xe1):'';return _0x2c861d(0xfc)+_0x131e50+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20‚Ä¢\x20'+escapeHtml(_0x325b98['name'])+_0x4f3f4e+_0x2c861d(0x105);})[_0x3490a7(0x116)]('');}),onSnapshot(joinWinnersRef,_0x362069=>{const _0x2e3e2d=_0x7412b7,_0x205bb3=document[_0x2e3e2d(0xe7)](_0x2e3e2d(0xd2)),_0x3e6f80=document[_0x2e3e2d(0xe7)](_0x2e3e2d(0xfe)),_0x314d58=[];_0x362069['forEach'](_0xab7dbc=>{const _0x2c8b9b=_0x2e3e2d,_0x4b4ad5=_0xab7dbc['data']();_0x314d58[_0x2c8b9b(0x104)]({'id':_0xab7dbc['id'],'name':_0x4b4ad5['name']||'','number':_0x4b4ad5['number']||'','wonAt':_0x4b4ad5['wonAt']||0x0});}),_0x314d58['sort']((_0x194cde,_0x27dbaf)=>(_0x194cde[_0x2e3e2d(0xcb)]||0x0)-(_0x27dbaf[_0x2e3e2d(0xcb)]||0x0)),_0x3e6f80['textContent']=_0x314d58[_0x2e3e2d(0xea)];if(_0x314d58[_0x2e3e2d(0xea)]===0x0){_0x205bb3[_0x2e3e2d(0x14b)]=_0x2e3e2d(0x124);return;}_0x205bb3[_0x2e3e2d(0x14b)]=_0x314d58['map'](_0x478eed=>{const _0xf98d2b=_0x2e3e2d,_0x48c7cd=_0x478eed[_0xf98d2b(0xcb)]?'\x20<span\x20style=\x22font-size:0.8rem;\x20color:#666;\x22>'+new Date(_0x478eed[_0xf98d2b(0xcb)])[_0xf98d2b(0xe6)]()+_0xf98d2b(0x15b):'',_0x18af73=_0x478eed[_0xf98d2b(0x12c)]?_0xf98d2b(0x155)+_0x478eed[_0xf98d2b(0x12c)]+_0xf98d2b(0xe1):'';return'<div\x20style=\x22padding:6px\x204px;\x20border-bottom:1px\x20solid\x20#f9f9f9;\x22>üèÜ\x20'+escapeHtml(_0x478eed[_0xf98d2b(0xfb)])+_0x18af73+_0x48c7cd+_0xf98d2b(0x10e);})[_0x2e3e2d(0x116)]('');});function escapeHtml(_0x11386e){const _0x3d3b16=_0x7412b7;return String(_0x11386e)[_0x3d3b16(0xdd)](/&/g,'&amp;')[_0x3d3b16(0xdd)](/</g,_0x3d3b16(0xf9))['replace'](/>/g,_0x3d3b16(0xc5))[_0x3d3b16(0xdd)](/"/g,_0x3d3b16(0x163))['replace'](/'/g,_0x3d3b16(0x143));}}function showToast(_0x42f6fb,_0x179d7b=_0x7412b7(0x119)){const _0x5ca125=_0x7412b7,_0x1c7555=document[_0x5ca125(0xe7)]('toast-container'),_0x16fe8a=document['createElement'](_0x5ca125(0xc8));_0x16fe8a[_0x5ca125(0xc7)]=_0x5ca125(0xdc)+_0x179d7b,_0x16fe8a['textContent']=_0x42f6fb,_0x1c7555[_0x5ca125(0x15c)](_0x16fe8a),void _0x16fe8a['offsetWidth'],_0x16fe8a[_0x5ca125(0xd7)][_0x5ca125(0x146)]('show'),setTimeout(()=>{const _0x55a710=_0x5ca125;_0x16fe8a['classList'][_0x55a710(0xcc)](_0x55a710(0xcd)),setTimeout(()=>_0x16fe8a[_0x55a710(0xcc)](),0x12c);},0xbb8);}

    </script>



</body>
</html>
